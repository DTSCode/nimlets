dependencies:
  pre:
    - sudo apt-get install python3-dev gcc
    - |
        if [ !-x ~/nim/ ];
        then
          git clone -b devel --depth 1 https://github.com/Araq/Nimrod.git ~/nim/
          git clone -b devel --depth 1 git://github.com/nimrod-code/csources ~/nim/csources/
          cd ~/nim/csources
          sh build.sh
          cd ../
          bin/nim c koch
          ./koch boot
          ln -s ~/nim/bin/nim ~/bin/nim
        fi

  cache_directories:
    - "~/bin/"
    - "~/nim/"

## Customize test commands
test:
  override:
    - ./build

## Customize deployment commands
deployment:
  staging:
    branch: master
    commands:
      - git init output/
      - git -C output/ add .
      - git -C output/ commit -m 'Build Site'
      - git -C output/ remote add origin git@github.com:nimlets/nimlets.github.io.git
      - git -C output/ push origin master
